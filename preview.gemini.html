<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>NexusCanon // Obsidian Governance</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=JetBrains+Mono:wght@400;500&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

  <style>
    :root {
      /* === PALETTE: OBSIDIAN & PLATINUM === */
      --bg-deep: #030303;
      --bg-void: #0a0a0c;
      --glass: rgba(20, 20, 25, 0.6);
      --glass-border: rgba(255, 255, 255, 0.08);
      --glass-highlight: rgba(255, 255, 255, 0.03);
      
      --text-main: #ECECEC;
      --text-muted: #888888;
      --text-gold: #D4AF37; /* The luxury accent */

      /* INTELLIGENCE SIGNALS */
      --signal-safe: #a3e635;  /* Muted Lime */
      --signal-warn: #fbbf24;  /* Amber */
      --signal-crit: #f87171;  /* Soft Red */
      --signal-blue: #38bdf8;  /* Electric Blue */

      /* SPACING & GEOMETRY */
      --radius-lg: 24px;
      --radius-sm: 4px;
      --ease-luxury: cubic-bezier(0.16, 1, 0.3, 1); /* Silk smooth */

      --font-serif: 'Playfair Display', serif;
      --font-mono: 'JetBrains Mono', monospace;
      --font-sans: 'Inter', sans-serif;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }

    body {
      background-color: var(--bg-deep);
      color: var(--text-main);
      font-family: var(--font-sans);
      font-weight: 300;
      line-height: 1.6;
      overflow-x: hidden;
      /* Expensive noise texture */
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
    }

    /* === ATMOSPHERE === */
    .ambient-light {
      position: fixed; top: -20%; left: 50%; width: 100vw; height: 100vh;
      background: radial-gradient(circle at 50% 0%, rgba(255,255,255,0.08), transparent 60%);
      transform: translateX(-50%); pointer-events: none; z-index: 0;
    }

    /* === TYPOGRAPHY CLASSES === */
    h1, h2, h3 { font-family: var(--font-serif); font-weight: 400; margin: 0; }
    .mono { font-family: var(--font-mono); letter-spacing: -0.02em; }
    .caps { text-transform: uppercase; letter-spacing: 0.1em; font-size: 10px; font-weight: 500; }
    .gold { color: var(--text-gold); }
    
    /* === HEADER === */
    header {
      position: fixed; top: 0; width: 100%; z-index: 100;
      padding: 20px 40px;
      display: flex; justify-content: space-between; align-items: center;
      background: linear-gradient(to bottom, rgba(3,3,3,0.8), transparent);
      backdrop-filter: blur(10px);
    }
    
    .brand { display: flex; align-items: center; gap: 12px; }
    .brand-mark { 
      width: 16px; height: 16px; border: 1px solid var(--text-main); transform: rotate(45deg); 
      display: grid; place-items: center;
    }
    .brand-mark div { width: 4px; height: 4px; background: var(--text-main); }
    .brand-name { font-family: var(--font-serif); font-size: 18px; letter-spacing: 0.02em; }

    .nav-status {
      display: flex; gap: 24px; align-items: center;
    }
    .status-indicator {
      display: flex; align-items: center; gap: 8px;
      font-family: var(--font-mono); font-size: 11px; color: var(--text-muted);
      border: 1px solid var(--glass-border); padding: 6px 12px; border-radius: 99px;
      background: rgba(255,255,255,0.01);
    }
    .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--text-muted); transition: background 0.3s; }
    .dot.live { background: var(--signal-safe); box-shadow: 0 0 10px var(--signal-safe); }
    .dot.warn { background: var(--signal-warn); box-shadow: 0 0 10px var(--signal-warn); }
    .dot.crit { background: var(--signal-crit); box-shadow: 0 0 10px var(--signal-crit); }

    /* === SCROLL FRAMEWORK === */
    .scroll-container { position: relative; height: 400vh; }
    
    .sticky-viewport {
      position: sticky; top: 0; height: 100vh; width: 100%;
      display: grid; place-items: center;
      overflow: hidden;
    }

    /* === THE OBELISK (Central Interface) === */
    .obelisk {
      width: 90vw; max-width: 1400px; height: 80vh;
      background: var(--glass);
      backdrop-filter: blur(40px);
      -webkit-backdrop-filter: blur(40px);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      box-shadow: 0 40px 100px -20px rgba(0,0,0,0.8);
      display: grid; grid-template-columns: 1fr 1.2fr;
      position: relative; overflow: hidden;
    }

    /* Cinematic sheen reflection */
    .obelisk::after {
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    }

    /* --- LEFT: NARRATIVE CONTROL --- */
    .narrative-col {
      padding: 60px;
      display: flex; flex-direction: column; justify-content: space-between;
      border-right: 1px solid var(--glass-border);
      position: relative;
    }

    .chapter-mark { 
      font-family: var(--font-mono); color: var(--text-gold); 
      display: flex; align-items: center; gap: 8px; margin-bottom: 20px;
    }
    .chapter-line { height: 1px; width: 40px; background: var(--text-gold); }

    .hero-text-container { position: relative; height: 200px; }
    .hero-text {
      position: absolute; top: 0; left: 0; width: 100%;
      opacity: 0; transform: translateY(20px); transition: all 0.8s var(--ease-luxury);
    }
    .hero-text.active { opacity: 1; transform: translateY(0); }
    
    .hero-text h1 { font-size: 3.5rem; line-height: 1.1; margin-bottom: 24px; color: #fff; }
    .hero-text p { font-size: 1.1rem; color: var(--text-muted); max-width: 90%; }

    /* POLICY CONTROLS */
    .controls-area {
      background: rgba(0,0,0,0.2);
      border-radius: 16px;
      padding: 32px;
      border: 1px solid var(--glass-border);
    }
    
    .control-row {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 24px;
    }
    .control-row:last-child { margin-bottom: 0; }

    .switch-label h3 { font-family: var(--font-sans); font-size: 14px; font-weight: 500; }
    .switch-label p { font-size: 12px; color: var(--text-muted); margin: 0; }

    /* Luxury Switch */
    .lux-switch {
      appearance: none; width: 48px; height: 28px;
      background: rgba(255,255,255,0.05); border-radius: 99px;
      border: 1px solid var(--glass-border); position: relative; cursor: pointer;
      transition: all 0.3s;
    }
    .lux-switch::after {
      content: ''; position: absolute; top: 2px; left: 2px; width: 22px; height: 22px;
      background: var(--text-muted); border-radius: 50%; transition: all 0.3s var(--ease-luxury);
    }
    .lux-switch:checked { border-color: var(--text-gold); background: rgba(212, 175, 55, 0.1); }
    .lux-switch:checked::after { transform: translateX(20px); background: var(--text-gold); box-shadow: 0 0 10px rgba(212, 175, 55, 0.4); }

    /* --- RIGHT: THE INTELLIGENCE ENGINE --- */
    .intelligence-col {
      background: #050507;
      position: relative;
      display: flex; flex-direction: column;
    }
    
    /* Grid overlay */
    .grid-overlay {
      position: absolute; inset: 0; 
      background-image: linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
                        linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
    }

    .engine-header {
      padding: 32px; border-bottom: 1px solid var(--glass-border);
      display: flex; justify-content: space-between; align-items: center; z-index: 2;
    }
    .engine-title { display: flex; align-items: center; gap: 8px; }
    .engine-icon { width: 8px; height: 8px; background: var(--signal-blue); border-radius: 50%; box-shadow: 0 0 10px var(--signal-blue); }

    /* The Graph/Visualizer Area */
    .visualizer {
      flex: 1; position: relative; display: grid; place-items: center;
      overflow: hidden;
    }

    /* Risk Ring */
    .risk-ring {
      width: 300px; height: 300px; border-radius: 50%;
      border: 1px solid var(--glass-border);
      position: relative; display: grid; place-items: center;
      transition: all 0.5s var(--ease-luxury);
    }
    .risk-ring::before {
      content: ''; position: absolute; inset: -10px; border-radius: 50%;
      border: 1px solid transparent;
      border-top-color: var(--text-gold); border-bottom-color: var(--text-gold);
      animation: spin 10s linear infinite; opacity: 0.3;
    }
    .risk-ring.critical { border-color: var(--signal-crit); box-shadow: 0 0 50px rgba(248, 113, 113, 0.1); }
    .risk-ring.critical::before { border-color: var(--signal-crit); animation-duration: 2s; opacity: 0.8; }

    .risk-score {
      text-align: center; z-index: 2;
    }
    .score-val { font-family: var(--font-mono); font-size: 4rem; font-weight: 300; line-height: 1; }
    .score-lbl { font-size: 12px; color: var(--text-muted); letter-spacing: 0.2em; margin-top: 8px; }

    /* Action Bar (Bottom) */
    .action-deck {
      padding: 32px; border-top: 1px solid var(--glass-border);
      background: rgba(255,255,255,0.01); z-index: 2;
      display: grid; grid-template-columns: 1fr auto; gap: 20px; align-items: center;
    }
    
    .log-stream {
      font-family: var(--font-mono); font-size: 11px; color: var(--text-muted);
      height: 40px; overflow: hidden; display: flex; flex-direction: column; justify-content: flex-end;
    }
    .log-entry { margin-bottom: 4px; opacity: 0; animation: fadeUp 0.3s forwards; }
    .log-entry span { color: var(--text-main); }
    .log-entry.warn span { color: var(--signal-warn); }

    .btn-exec {
      background: var(--text-main); color: #000; border: none;
      padding: 16px 32px; border-radius: 4px;
      font-family: var(--font-mono); font-weight: 500; letter-spacing: 0.05em;
      cursor: pointer; transition: all 0.3s;
    }
    .btn-exec:hover { background: #fff; box-shadow: 0 0 20px rgba(255,255,255,0.3); transform: translateY(-1px); }
    .btn-exec:disabled { background: var(--glass-border); color: var(--text-muted); cursor: not-allowed; box-shadow: none; transform: none; }

    /* === DRAWER (THE VAULT) === */
    .vault-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 200;
      opacity: 0; pointer-events: none; transition: 0.5s var(--ease-luxury);
    }
    .vault {
      position: fixed; top: 0; right: 0; height: 100vh; width: 600px;
      background: #080808; border-left: 1px solid var(--glass-border);
      transform: translateX(100%); transition: transform 0.6s var(--ease-luxury);
      z-index: 201; display: flex; flex-direction: column;
    }
    .vault.open { transform: translateX(0); }
    .vault-overlay.open { opacity: 1; pointer-events: auto; }

    .vault-header {
      padding: 40px; border-bottom: 1px solid var(--glass-border);
      display: flex; justify-content: space-between; align-items: center;
    }
    .vault-title h2 { font-family: var(--font-mono); font-size: 14px; text-transform: uppercase; color: var(--text-gold); }
    
    .vault-content { padding: 40px; flex: 1; overflow-y: auto; font-family: var(--font-mono); font-size: 12px; color: var(--text-muted); }
    .code-block {
      background: rgba(255,255,255,0.03); padding: 20px; border-radius: 8px; border: 1px solid var(--glass-border);
      white-space: pre-wrap; margin-top: 20px;
    }

    /* ANIMATIONS */
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* RESPONSIVE */
    @media (max-width: 1000px) {
      .obelisk { grid-template-columns: 1fr; height: auto; display: flex; flex-direction: column; max-height: 90vh; overflow-y: auto; }
      .narrative-col { padding: 32px; border-right: none; border-bottom: 1px solid var(--glass-border); }
      .vault { width: 100%; }
    }
  </style>
</head>
<body>

  <div class="ambient-light"></div>

  <header>
    <div class="brand">
      <div class="brand-mark"><div></div></div>
      <span class="brand-name">NexusCanon</span>
    </div>
    
    <div class="nav-status">
      <div class="status-indicator">
        <div class="dot live" id="sysDot"></div>
        <span class="caps" id="sysState">INTELLIGENCE ACTIVE</span>
      </div>
      <div class="status-indicator">
        <span class="caps mono" id="clock">00:00:00 Z</span>
      </div>
    </div>
  </header>

  <main class="scroll-container" id="scrollTrack">
    <div class="sticky-viewport">
      
      <div class="obelisk">
        
        <div class="narrative-col">
          <div>
            <div class="chapter-mark">
              <span class="caps" id="actLabel">ACT I // AUTHENTICATION</span>
              <div class="chapter-line"></div>
            </div>
            
            <div class="hero-text-container">
              <div class="hero-text active" id="text1">
                <h1>Sovereign<br>Access Control.</h1>
                <p>Identity is the first perimeter. Eliminate role drift with policy-gated SSO and immutable session stamping.</p>
              </div>
              <div class="hero-text" id="text2">
                <h1>Algorithmic<br>Governance.</h1>
                <p>Drift is failure. Enforce 3-way matching logic that automatically compiles evidence and flags variance.</p>
              </div>
              <div class="hero-text" id="text3">
                <h1>Proof<br>Ascendancy.</h1>
                <p>The settlement is final. Generate a cryptographically sealed proof pack for auditors and investors.</p>
              </div>
            </div>
          </div>

          <div class="controls-area">
            <div class="control-row">
              <div class="switch-label">
                <h3>Verification Strictness</h3>
                <p>Evidence depth required for release</p>
              </div>
              <div class="caps gold" id="matchLabel">3-WAY</div>
            </div>
            
            <div class="control-row">
              <div class="switch-label">
                <h3>Forced Documentation</h3>
                <p>Require narrative for all overrides</p>
              </div>
              <input type="checkbox" class="lux-switch" checked id="swOverride" onchange="calculateRisk()">
            </div>
            
             <div class="control-row">
              <div class="switch-label">
                <h3>Audit Narrative</h3>
                <p>Auto-compile decision logs</p>
              </div>
              <input type="checkbox" class="lux-switch" checked id="swAudit" onchange="calculateRisk()">
            </div>
          </div>
        </div>

        <div class="intelligence-col">
          <div class="grid-overlay"></div>
          
          <div class="engine-header">
            <div class="engine-title">
              <div class="engine-icon"></div>
              <span class="caps mono">RISK ENGINE v9.2</span>
            </div>
            <span class="caps mono" style="color:var(--text-muted)">LIVE MONITORING</span>
          </div>

          <div class="visualizer">
            <div class="risk-ring" id="riskRing">
              <div class="risk-score">
                <div class="score-val" id="riskVal">02</div>
                <div class="score-lbl caps">RISK BASIS POINTS</div>
              </div>
            </div>
          </div>

          <div class="action-deck">
            <div class="log-stream" id="logStream">
              <div class="log-entry"><span>SYS.INIT</span> :: MODULES LOADED OK</div>
            </div>
            
            <button class="btn-exec" id="mainAction" onclick="handleAction()">SIMULATE EVENT</button>
          </div>
        </div>

      </div>
      
    </div>
  </main>

  <div class="vault-overlay" id="vaultOverlay" onclick="toggleVault()"></div>
  <aside class="vault" id="vault">
    <div class="vault-header">
      <div class="vault-title">
        <h2>Immutable Proof Pack</h2>
        <span class="caps mono" style="color:var(--text-muted)">ID: PX-9942-ALPHA</span>
      </div>
      <div class="caps mono" style="cursor:pointer" onclick="toggleVault()">CLOSE [X]</div>
    </div>
    <div class="vault-content">
      <p>This JSON artifact represents the final state of the governance procedure. It is cryptographically signed and ready for export.</p>
      
      <div class="code-block" id="vaultJson">
// WAITING FOR SETTLEMENT...
      </div>
      
      <button class="btn-exec" style="width:100%; margin-top:40px;">DOWNLOAD SECURE JSON</button>
    </div>
  </aside>

  <script>
    // === 1. CLOCK & ATMOSPHERE ===
    function updateClock() {
      const now = new Date();
      document.getElementById('clock').innerText = now.toISOString().split('T')[1].split('.')[0] + " Z";
    }
    setInterval(updateClock, 1000);
    updateClock();

    // === 2. SCROLL NARRATIVE LOGIC ===
    const track = document.getElementById('scrollTrack');
    const texts = [document.getElementById('text1'), document.getElementById('text2'), document.getElementById('text3')];
    const actLabel = document.getElementById('actLabel');
    const actionBtn = document.getElementById('mainAction');
    
    let currentAct = 0;

    window.addEventListener('scroll', () => {
      const progress = window.scrollY / (track.offsetHeight - window.innerHeight);
      
      let nextAct = 0;
      if (progress > 0.33) nextAct = 1;
      if (progress > 0.66) nextAct = 2;

      if (nextAct !== currentAct) {
        currentAct = nextAct;
        updateScene(currentAct);
      }
    });

    function updateScene(act) {
      // Switch Text
      texts.forEach(el => el.classList.remove('active'));
      texts[act].classList.add('active');

      // Update Labels
      const labels = ["ACT I // AUTHENTICATION", "ACT II // GOVERNANCE", "ACT III // SETTLEMENT"];
      const btns = ["AUTHENTICATE IDENTITY", "SIMULATE EXCEPTION", "EXPORT PROOF"];
      
      actLabel.innerText = labels[act];
      actionBtn.innerText = btns[act];
      
      // Reset simulator if moving back
      if(act === 0) {
        log("SCENE RESET :: WAITING FOR AUTH");
        document.getElementById('riskVal').innerText = "02";
      }
    }

    // === 3. RISK ENGINE ===
    function calculateRisk() {
      const override = document.getElementById('swOverride').checked;
      const audit = document.getElementById('swAudit').checked;
      
      let score = 2; // Baseline
      if(!override) score += 45;
      if(!audit) score += 30;

      // Visual update
      const ring = document.getElementById('riskRing');
      const val = document.getElementById('riskVal');
      const sysDot = document.getElementById('sysDot');
      const sysState = document.getElementById('sysState');

      let target = score;
      let current = parseInt(val.innerText);
      
      // Simple count up effect
      const interval = setInterval(() => {
        if(current < target) current++;
        else if(current > target) current--;
        else clearInterval(interval);
        
        val.innerText = current.toString().padStart(2, '0');
        
        if(current > 50) {
          ring.classList.add('critical');
          val.style.color = 'var(--signal-crit)';
          sysDot.className = 'dot crit';
          sysState.innerText = "POSTURE CRITICAL";
          sysState.style.color = 'var(--signal-crit)';
        } else {
          ring.classList.remove('critical');
          val.style.color = 'var(--text-main)';
          sysDot.className = 'dot live';
          sysState.innerText = "INTELLIGENCE ACTIVE";
          sysState.style.color = 'var(--text-muted)';
        }
      }, 10);
      
      if(score > 50) log("WARN :: GOVERNANCE POSTURE WEAKENED", true);
      else log("INFO :: POSTURE OPTIMAL");
    }

    // === 4. SIMULATOR LOGIC ===
    const logContainer = document.getElementById('logStream');

    function log(msg, isWarn = false) {
      const line = document.createElement('div');
      line.className = isWarn ? 'log-entry warn' : 'log-entry';
      line.innerHTML = `<span>${new Date().toISOString().split('T')[1].slice(0,8)}</span> :: ${msg}`;
      logContainer.appendChild(line);
      logContainer.scrollTop = logContainer.scrollHeight;
    }

    function handleAction() {
      if(currentAct === 0) {
        log("AUTH :: IDENTITY VERIFIED [SSO-99]");
        window.scrollTo({ top: window.innerHeight * 1.3, behavior: 'smooth' });
      } 
      else if (currentAct === 1) {
        log("EVENT :: INVOICE MISMATCH (+ $4,000)", true);
        log("AUTO :: CASE #882 CREATED");
        document.getElementById('riskVal').innerText = "65"; // Force spike
        document.getElementById('riskRing').classList.add('critical');
        setTimeout(() => {
           window.scrollTo({ top: window.innerHeight * 2.6, behavior: 'smooth' });
        }, 1500);
      }
      else if (currentAct === 2) {
        toggleVault();
        updateVaultJSON();
      }
    }

    // === 5. VAULT LOGIC ===
    function toggleVault() {
      document.getElementById('vault').classList.toggle('open');
      document.getElementById('vaultOverlay').classList.toggle('open');
    }

    function updateVaultJSON() {
      const data = {
        "proof_id": "PX-9942-ALPHA",
        "timestamp": new Date().toISOString(),
        "final_state": "SETTLED_WITH_OVERRIDE",
        "governance": {
          "forced_documentation": document.getElementById('swOverride').checked,
          "audit_narrative": document.getElementById('swAudit').checked,
          "risk_basis_points": parseInt(document.getElementById('riskVal').innerText)
        },
        "evidence": [
          "invoice_scan_v2.pdf",
          "approval_chain.log"
        ]
      };
      document.getElementById('vaultJson').innerText = JSON.stringify(data, null, 2);
    }
  </script>
</body>
</html>