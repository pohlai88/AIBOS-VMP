{% extends "layout.html" %}

{% block title %}Case {{ caseId|string|truncate(8, True, '') if caseId else '—' }} — NexusCanon VMP{% endblock %}

{% block content %}
<div class="h-full overflow-y-auto">
  <!-- Back Navigation -->
  <div class="p-4 border-b vmp-border-color">
    <a href="/home" class="vmp-btn-primary inline-flex items-center gap-2">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back to Cases
    </a>
  </div>
  
  <!-- Case Detail Panel Container -->
  <div id="case-detail-panel">
    {% if caseDetail %}
      <!-- Render case detail partial inline (data already loaded from route) -->
      {% set error = null %}
      {% include "_case_detail_content.html" %}
    {% elif caseId %}
      <!-- Empty State (case not found) -->
      <div class="flex items-center justify-center h-full min-h-[600px]">
        <div class="text-center max-w-md p-8">
          <div class="vmp-h3 mb-4">Case Not Found</div>
          <div class="vmp-body vmp-muted mb-6">
            The case you're looking for doesn't exist or you don't have access to it.
          </div>
          <a href="/home" class="vmp-btn-primary">Return to Home</a>
        </div>
      </div>
    {% else %}
      <!-- Invalid case ID -->
      <div class="flex items-center justify-center h-full min-h-[600px]">
        <div class="text-center max-w-md p-8">
          <div class="vmp-h3 mb-4">Invalid Case ID</div>
          <div class="vmp-body vmp-muted mb-6">
            Please provide a valid case ID.
          </div>
          <a href="/home" class="vmp-btn-primary">Return to Home</a>
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}

