{% extends "layout.html" %}
{% block title %}Live Feed â€” NexusCanon VMP{% endblock %}

{% block content %}
<style>
    /* Scanner Physics */
    @keyframes scan {
        0% { transform: translateY(-100%); opacity: 0; }
        15% { opacity: 1; }
        100% { transform: translateY(100%); opacity: 0; }
    }

    .scanner-container {
        position: relative;
        overflow: hidden;
    }

    .scanner-beam {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        pointer-events: none;
        z-index: 10;
        background: linear-gradient(
            180deg, 
            transparent 0%, 
            rgba(0, 255, 157, 0.02) 40%, 
            rgba(0, 255, 157, 0.2) 50%, 
            rgba(0, 255, 157, 0.02) 60%, 
            transparent 100%
        );
        border-bottom: 1px solid rgba(0, 255, 157, 0.1);
        animation: scan 4s linear infinite;
    }

    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
</style>

<div class="min-h-full bg-[#050505] text-white p-6 md:p-10">
    <div class="max-w-[1400px] mx-auto space-y-8">
        
        <header class="flex flex-col lg:flex-row justify-between items-start lg:items-end gap-6 border-b border-white/5 pb-6">
            <div class="flex-1 min-w-0">
                <div class="flex items-center gap-3 text-xs tracking-widest text-white/40 mb-2 font-mono uppercase">
                    <span>NexusCanon</span>
                    <span class="text-white/20">/</span>
                    <span class="text-[#00ff9d]">Live Feed</span>
                </div>
                <h1 class="text-3xl md:text-4xl font-light tracking-tight text-white/90 whitespace-nowrap">
                    Trace <span class="font-medium text-white">Log</span>
                </h1>
                <p class="mt-2 text-white/50 text-sm max-w-lg hidden md:block">
                    Real-time activity stream for cases, payments, and system events.
                </p>
            </div>
        </header>

        <div class="hud-card rounded-2xl p-0 flex flex-col h-full scanner-container border border-white/10">
            
            <div class="scanner-beam"></div>

            <div class="p-5 pb-3 border-b border-white/5 flex justify-between items-center bg-white/[0.01] relative z-20">
                <div class="flex items-center gap-2">
                    <span class="w-1.5 h-1.5 rounded-full bg-[#00ff9d] animate-pulse"></span>
                    <span class="text-xs font-medium text-white tracking-wide">LIVE FEED</span>
                </div>
                <span class="text-[9px] font-mono text-white/30">TRACE_LOG</span>
            </div>

            <div class="flex-1 overflow-y-auto p-0 scrollbar-hide relative z-20 min-h-[600px]">
                {% if activities and activities|length > 0 %}
                    {% for activity in activities %}
                    <div class="group/item flex gap-4 p-4 border-b border-white/5 hover:bg-white/[0.02] transition-colors cursor-pointer">
                        <div class="mt-1">
                            <div class="w-2 h-2 rounded-full border border-[#00ff9d] bg-[#00ff9d]/20 shadow-[0_0_8px_#00ff9d]"></div>
                            <div class="w-px h-full bg-white/5 mx-auto mt-2 {% if loop.last %}hidden{% endif %}"></div>
                        </div>
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-[10px] font-mono text-white/30">{{ activity.timestamp|date('h:i A') if activity.timestamp else 'NOW' }}</span>
                                <span class="text-[10px] font-bold text-[#00ff9d] border border-[#00ff9d]/20 px-1.5 rounded bg-[#00ff9d]/5">{{ activity.status|upper if activity.status else 'ACTIVE' }}</span>
                            </div>
                            <p class="text-sm text-white/90">{{ activity.title or 'Activity Event' }}</p>
                            {% if activity.description %}
                            <p class="text-xs text-white/40 mt-1">{{ activity.description }}</p>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="flex flex-col items-center justify-center h-full text-center p-12">
                        <div class="text-6xl mb-4 opacity-20">ðŸ“¡</div>
                        <div class="text-lg font-medium text-white/70 mb-2">No Activity</div>
                        <div class="text-sm text-white/40">Activity events will appear here as they occur.</div>
                    </div>
                {% endif %}
            </div>

            <div class="absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-[#050505] to-transparent pointer-events-none z-20"></div>
        </div>

    </div>
</div>
{% endblock %}

