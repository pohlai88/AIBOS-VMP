{% extends "layout.html" %}

{% block title %}Settings & Configuration — NexusCanon VMP{% endblock %}

{% block content %}
<div class="h-full overflow-y-auto">
    <div class="vmp-container py-8 relative z-10">
        
        <header class="mb-8">
            <div class="vmp-label mb-2 opacity-70">// system configuration</div>
            <h1 class="vmp-h1 leading-none mb-4">Settings & Configuration</h1>
            <p class="vmp-body max-w-[60ch] opacity-80">
                Manage your account settings, preferences, integrations, and system configuration.
            </p>
        </header>

        {% if error %}
        <div class="vmp-panel p-4 mb-8 border" style="border-color: var(--vmp-danger); background: rgba(255, 85, 85, 0.05);">
            <div class="vmp-label vmp-text-danger mb-1">Error</div>
            <div class="vmp-body">{{ error }}</div>
        </div>
        {% endif %}

        {% if success %}
        <div class="vmp-panel p-4 mb-8 border" style="border-color: var(--vmp-ok); background: rgba(96, 255, 198, 0.05);">
            <div class="vmp-label vmp-text-ok mb-1">Success</div>
            <div class="vmp-body">{{ success }}</div>
        </div>
        {% endif %}

        <div class="grid md:grid-cols-2 gap-6 mb-8">
            
            <!-- Account Settings -->
            <div class="vmp-card">
                <header class="vmp-card-header">
                    <div>
                        <div class="vmp-label mb-1 opacity-80">ACCOUNT SETTINGS</div>
                        <div class="vmp-caption opacity-60">Profile and authentication</div>
                    </div>
                </header>
                <div class="p-4 space-y-3">
                    <a href="/profile" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Profile & Contact Info</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/profile#bank-details" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Bank Details</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/change-password" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Change Password</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/two-factor" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Two-Factor Authentication</span>
                        <span class="opacity-50">→</span>
                    </a>
                </div>
            </div>

            <!-- Preferences -->
            <div class="vmp-card">
                <header class="vmp-card-header">
                    <div>
                        <div class="vmp-label mb-1 opacity-80">PREFERENCES</div>
                        <div class="vmp-caption opacity-60">UI and notification settings</div>
                    </div>
                </header>
                <div class="p-4 space-y-3">
                    <button class="vmp-btn vmp-btn-outline w-full justify-between" onclick="toggleTheme()">
                        <span>Theme</span>
                        <span class="opacity-50" id="theme-indicator">DARK</span>
                    </button>
                    <a href="/notifications/settings" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Notification Preferences</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/preferences/language" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Language & Locale</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/preferences/display" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Display Options</span>
                        <span class="opacity-50">→</span>
                    </a>
                </div>
            </div>

            <!-- Integrations -->
            <div class="vmp-card">
                <header class="vmp-card-header">
                    <div>
                        <div class="vmp-label mb-1 opacity-80">INTEGRATIONS</div>
                        <div class="vmp-caption opacity-60">External services and APIs</div>
                    </div>
                </header>
                <div class="p-4 space-y-3">
                    <a href="/integrations/email" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Email Integration</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/integrations/whatsapp" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>WhatsApp Integration</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/integrations/api-keys" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>API Keys</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/integrations/webhooks" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Webhooks</span>
                        <span class="opacity-50">→</span>
                    </a>
                </div>
            </div>

            <!-- System Configuration -->
            <div class="vmp-card">
                <header class="vmp-card-header">
                    <div>
                        <div class="vmp-label mb-1 opacity-80">SYSTEM CONFIG</div>
                        <div class="vmp-caption opacity-60">Advanced system settings</div>
                    </div>
                </header>
                <div class="p-4 space-y-3">
                    {% if user.isInternal %}
                    <a href="/ops/ports" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Port Configuration</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/ops/command-center" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Command Center</span>
                        <span class="opacity-50">→</span>
                    </a>
                    {% endif %}
                    <a href="/settings/data-export" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Data Export</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/settings/audit-logs" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Audit Logs</span>
                        <span class="opacity-50">→</span>
                    </a>
                </div>
            </div>

            <!-- Security -->
            <div class="vmp-card">
                <header class="vmp-card-header">
                    <div>
                        <div class="vmp-label mb-1 opacity-80">SECURITY</div>
                        <div class="vmp-caption opacity-60">Security and access control</div>
                    </div>
                </header>
                <div class="p-4 space-y-3">
                    <a href="/security/sessions" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Active Sessions</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/security/access-logs" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Access Logs</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/security/permissions" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Permissions</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/security/backup-codes" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Backup Codes</span>
                        <span class="opacity-50">→</span>
                    </a>
                </div>
            </div>

            <!-- Billing & Subscription -->
            <div class="vmp-card">
                <header class="vmp-card-header">
                    <div>
                        <div class="vmp-label mb-1 opacity-80">BILLING</div>
                        <div class="vmp-caption opacity-60">Subscription and payments</div>
                    </div>
                </header>
                <div class="p-4 space-y-3">
                    <a href="/billing/subscription" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Subscription Plan</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/billing/invoices" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Billing History</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/billing/payment-methods" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Payment Methods</span>
                        <span class="opacity-50">→</span>
                    </a>
                    <a href="/billing/usage" class="vmp-btn vmp-btn-outline w-full justify-between">
                        <span>Usage & Limits</span>
                        <span class="opacity-50">→</span>
                    </a>
                </div>
            </div>

        </div>

        <!-- Quick Actions -->
        <div class="vmp-panel p-6 border mb-8" style="border-color: var(--vmp-border);">
            <div class="vmp-label mb-4 opacity-80">QUICK ACTIONS</div>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <a href="/home" class="vmp-btn vmp-btn-outline">
                    <span>Back to Home</span>
                </a>
                <a href="/case-dashboard" class="vmp-btn vmp-btn-outline">
                    <span>View Cases</span>
                </a>
                <a href="/invoices" class="vmp-btn vmp-btn-outline">
                    <span>Invoices</span>
                </a>
                <a href="/payments" class="vmp-btn vmp-btn-outline">
                    <span>Payments</span>
                </a>
            </div>
        </div>

        <!-- System Information -->
        <div class="vmp-panel p-6 border" style="border-color: var(--vmp-border);">
            <div class="vmp-label mb-4 opacity-80">SYSTEM INFORMATION</div>
            <div class="grid md:grid-cols-2 gap-4">
                <div class="flex justify-between items-center">
                    <span class="vmp-body-small opacity-80">Gateway</span>
                    <span class="vmp-code-small opacity-60">NC-VMP-01</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="vmp-body-small opacity-80">Protocol</span>
                    <span class="vmp-code-small opacity-60">HTTPS / SECURE</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="vmp-body-small opacity-80">Session</span>
                    <span class="vmp-code-small opacity-60">Active</span>
                </div>
                {% if user %}
                <div class="flex justify-between items-center">
                    <span class="vmp-body-small opacity-80">User</span>
                    <span class="vmp-code-small opacity-60 truncate max-w-[200px]">{{ user.email }}</span>
                </div>
                {% endif %}
            </div>
        </div>

    </div>
</div>

<script>
function toggleTheme() {
  const html = document.documentElement;
  const currentTheme = html.getAttribute('data-theme') || 'dark';
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', newTheme);
  localStorage.setItem('vmp-theme', newTheme);
  document.getElementById('theme-indicator').textContent = newTheme.toUpperCase();
}
</script>
{% endblock %}

