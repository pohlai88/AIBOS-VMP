<!-- Case Activity Feed Partial (Sprint 8.1) -->
<div class="p-5 border-t vmp-border-color">
    <div class="vmp-label-kicker vmp-label-kicker-strong mb-4">ACTIVITY FEED</div>
    
    {% if error %}
    <div class="vmp-panel p-3 border vmp-border-color vmp-signal-danger">
        <div class="vmp-caption vmp-signal-danger">{{ error }}</div>
    </div>
    {% elif activities and activities|length > 0 %}
    <div class="space-y-3 max-h-64 overflow-y-auto">
        {% for activity in activities %}
        <div class="flex gap-3 items-start">
            <!-- Timeline dot -->
            <div class="flex flex-col items-center shrink-0">
                <div class="w-2 h-2 rounded-full 
                    {% if activity.type == 'message' %} vmp-bg-ok
                    {% elif activity.type == 'decision' %} vmp-bg-warn
                    {% elif activity.type == 'evidence' %} vmp-bg-ok
                    {% else %} vmp-bg-muted
                    {% endif %} mt-1.5"></div>
                {% if not loop.last %}
                <div class="w-px h-full vmp-bg-border min-h-8 mt-1"></div>
                {% endif %}
            </div>
            
            <!-- Activity content -->
            <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2 mb-1">
                    <span class="vmp-caption font-medium">
                        {% if activity.actor == 'vendor' %}Vendor
                        {% elif activity.actor == 'internal' %}Internal Team
                        {% else %}{{ activity.actor }}
                        {% endif %}
                    </span>
                    <span class="vmp-caption vmp-muted">
                        {{ activity.action }}
                    </span>
                </div>
                {% if activity.details %}
                <div class="vmp-body-small vmp-muted mb-1">
                    {{ activity.details | truncate(100) }}
                </div>
                {% endif %}
                {% if activity.reason %}
                <div class="vmp-caption vmp-muted italic">
                    Reason: {{ activity.reason }}
                </div>
                {% endif %}
                <div class="vmp-caption vmp-muted mt-1">
                    {{ activity.timestamp | date('%b %d, %Y at %I:%M %p') if activity.timestamp else 'â€”' }}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <!-- Empty State -->
    <div class="text-center py-8">
        <div class="vmp-body-small vmp-muted">No activity yet</div>
    </div>
    {% endif %}
</div>

