<div class="vmp-panel p-6 border" style="border-color: var(--vmp-border);">
    
    <div class="flex items-center justify-between mb-6">
        <h3 class="vmp-h6">Decision Audit Trail</h3>
        <span class="vmp-tag vmp-tag-mono opacity-50">IMMUTABLE</span>
    </div>

    {% if error %}
    <div class="vmp-alert vmp-alert-warn mb-4">
        <div class="vmp-caption">{{ error }}</div>
    </div>
    {% endif %}

    {% if decisions and decisions|length > 0 %}
    <div class="vmp-timeline">
        {% for decision in decisions %}
        <div class="vmp-timeline-item {{ 'vmp-timeline-item-success' if 'approve' in decision.decision_type else 'vmp-timeline-item-warn' }}">
            <div class="vmp-timeline-date">
                {{ decision.created_at | date('%b %d') }}
                <span class="block opacity-50 text-[10px] mt-0.5">{{ decision.created_at | date('%H:%M') }}</span>
            </div>

            <div class="vmp-timeline-content">
                <div class="flex justify-between items-start">
                    <div class="vmp-timeline-title mb-1">
                        {{ decision.decision_type | replace('_', ' ') | title }}
                    </div>
                    <div class="vmp-caption opacity-50 font-mono text-[10px]">
                        {{ decision.who or 'System' }}
                    </div>
                </div>
                
                <div class="vmp-timeline-description">
                    {{ decision.what }}
                </div>

                {% if decision.why %}
                <div class="mt-2 p-2 rounded bg-[var(--vmp-bg)] border flex gap-2 items-start" style="border-color: var(--vmp-border);">
                    <span class="vmp-caption opacity-50 uppercase tracking-wider text-[9px] mt-0.5">Justification:</span>
                    <span class="vmp-body-small italic opacity-80">{{ decision.why }}</span>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="vmp-empty py-8 text-center bg-[var(--vmp-bg)] rounded-lg">
        <div class="vmp-caption opacity-40">No decisions recorded yet.</div>
    </div>
    {% endif %}
</div>