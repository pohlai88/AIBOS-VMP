<div class="vmp-card shadow-lg flex flex-col h-full border" style="border-color: var(--vmp-border);">
    
    <div class="flex-1 overflow-auto max-h-[500px]">
        <table class="vmp-table w-full">
            <thead class="sticky top-0 z-10 bg-[var(--vmp-panel)]">
                <tr>
                    <th class="w-32">TIMESTAMP</th>
                    <th class="w-24 text-center">PORT</th>
                    <th>EVENT / PAYLOAD</th>
                    <th class="w-32 text-center">STATUS</th>
                    <th class="w-24 text-right">CASE ID</th>
                </tr>
            </thead>
            <tbody class="divide-y" style="divide-color: var(--vmp-border);">
                {% if activities and activities|length > 0 %}
                    {% for log in activities %}
                    <tr class="group hover:bg-[var(--vmp-panel)] transition-colors">
                        
                        <td>
                            <div class="vmp-code-small opacity-60">{{ log.created_at | date('%H:%M:%S') }}</div>
                            <div class="vmp-caption opacity-30 text-[10px]">{{ log.created_at | date('%b %d') }}</div>
                        </td>

                        <td class="text-center">
                            <span class="vmp-tag text-[10px] uppercase opacity-70">{{ log.port_type }}</span>
                        </td>

                        <td>
                            <div class="vmp-body-small font-medium truncate max-w-[300px]">
                                {{ log.activity_type | replace('_', ' ') | title }}
                            </div>
                            <div class="vmp-code-small opacity-40 text-[10px] truncate max-w-[300px]">
                                MSG-ID: {{ log.message_id or '---' }}
                            </div>
                            {% if log.error_message %}
                            <div class="vmp-caption text-[var(--vmp-danger)] mt-1">{{ log.error_message }}</div>
                            {% endif %}
                        </td>

                        <td class="text-center">
                            {% if log.status == 'success' %}
                                <div class="w-2 h-2 rounded-full bg-[var(--vmp-ok)] mx-auto" title="Success"></div>
                            {% elif log.status == 'error' %}
                                <div class="w-2 h-2 rounded-full bg-[var(--vmp-danger)] mx-auto animate-pulse" title="Error"></div>
                            {% else %}
                                <div class="w-2 h-2 rounded-full bg-[var(--vmp-warn)] mx-auto" title="Pending"></div>
                            {% endif %}
                        </td>

                        <td class="text-right">
                            {% if log.case_id %}
                            <a href="/cases/{{ log.case_id }}" class="vmp-link text-xs">#{{ log.case_id|string|truncate(6, True, '') }}</a>
                            {% else %}
                            <span class="vmp-caption opacity-20">â€”</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5" class="p-12 text-center">
                            <div class="vmp-empty">
                                <div class="vmp-empty-title">NO ACTIVITY</div>
                                <div class="vmp-empty-description">Webhook events will appear here in real-time.</div>
                            </div>
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>