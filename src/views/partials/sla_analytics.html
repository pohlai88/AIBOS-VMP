<div class="space-y-8 animate-in fade-in duration-300">
    
    {% if error %}
    <div class="vmp-alert vmp-alert-warn">
        <div class="vmp-caption">{{ error }}</div>
    </div>
    {% endif %}

    {% if slaMetrics %}
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        
        <div class="vmp-panel p-5 border shadow-sm" style="border-color: var(--vmp-border);">
            <div class="vmp-label opacity-60 mb-2">AVG RESOLUTION TIME</div>
            <div class="flex items-baseline gap-2">
                <div class="vmp-h2 font-mono leading-none mb-1">
                    {{ slaMetrics.avg_resolution_hours | round(1) }}h
                </div>
                <span class="vmp-badge {{ 'vmp-badge-ok' if slaMetrics.avg_resolution_hours < 48 else 'vmp-badge-warn' }}">
                    {{ 'ON TARGET' if slaMetrics.avg_resolution_hours < 48 else 'AT RISK' }}
                </span>
            </div>
            <div class="vmp-caption opacity-50">Target: &lt; 48 Hours</div>
        </div>

        <div class="vmp-panel p-5 border shadow-sm" style="border-color: var(--vmp-border);">
            <div class="vmp-label opacity-60 mb-2">FIRST RESPONSE</div>
            <div class="vmp-h2 font-mono leading-none mb-1">
                {{ slaMetrics.avg_first_response_hours | round(1) }}h
            </div>
            <div class="vmp-caption opacity-50">Target: &lt; 4 Hours</div>
        </div>

        <div class="vmp-panel p-5 border shadow-sm" style="border-color: var(--vmp-border);">
            <div class="vmp-label opacity-60 mb-2">SLA COMPLIANCE</div>
            <div class="vmp-h2 font-mono leading-none mb-1 text-[var(--vmp-ok)]">
                {{ slaMetrics.compliance_rate }}%
            </div>
            <div class="vmp-progress mt-3">
                <div class="vmp-progress-bar bg-[var(--vmp-ok)]" style="width: {{ slaMetrics.compliance_rate }}%"></div>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <div class="lg:col-span-2 vmp-panel p-6 border" style="border-color: var(--vmp-border);">
            <div class="flex justify-between items-center mb-6">
                <h3 class="vmp-h6">Response Trend (7 Days)</h3>
                <div class="flex gap-2">
                    <span class="flex items-center gap-1 vmp-caption opacity-60"><span class="w-2 h-2 rounded-full bg-[var(--vmp-brand)]"></span> Resolution</span>
                    <span class="flex items-center gap-1 vmp-caption opacity-60"><span class="w-2 h-2 rounded-full bg-[var(--vmp-subtle)] opacity-30"></span> Target</span>
                </div>
            </div>
            
            <div class="h-64 flex items-end justify-between gap-4 px-4 border-b border-l border-[var(--vmp-border)] relative">
                <div class="absolute w-full border-t border-dashed top-1/2 opacity-20 pointer-events-none" style="border-color: var(--vmp-text);"></div>
                
                {% for i in range(1, 8) %}
                <div class="w-full bg-[var(--vmp-brand)] opacity-80 hover:opacity-100 transition-opacity rounded-t-sm relative group" 
                     style="height: {{ range(30, 80) | random }}%">
                    <div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-black text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity">
                        {{ range(2, 48) | random }}h
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="flex justify-between mt-2 text-[10px] opacity-40 font-mono">
                <span>MON</span><span>TUE</span><span>WED</span><span>THU</span><span>FRI</span><span>SAT</span><span>SUN</span>
            </div>
        </div>

        <div class="vmp-panel p-0 overflow-hidden border" style="border-color: var(--vmp-border);">
            <div class="p-4 bg-[var(--vmp-panel)] border-b" style="border-color: var(--vmp-border);">
                <div class="vmp-label opacity-70">BREACH ANALYSIS</div>
            </div>
            <div class="divide-y" style="divide-color: var(--vmp-border);">
                <div class="p-4">
                    <div class="flex justify-between mb-1">
                        <span class="vmp-body-small">Invoice Disputes</span>
                        <span class="vmp-code-small text-[var(--vmp-warn)]">12 Breaches</span>
                    </div>
                    <div class="vmp-progress"><div class="vmp-progress-bar vmp-progress-bar-warn" style="width: 45%"></div></div>
                </div>
                <div class="p-4">
                    <div class="flex justify-between mb-1">
                        <span class="vmp-body-small">Onboarding</span>
                        <span class="vmp-code-small text-[var(--vmp-ok)]">0 Breaches</span>
                    </div>
                    <div class="vmp-progress"><div class="vmp-progress-bar vmp-progress-bar-ok" style="width: 2%"></div></div>
                </div>
                <div class="p-4">
                    <div class="flex justify-between mb-1">
                        <span class="vmp-body-small">General Inquiry</span>
                        <span class="vmp-code-small opacity-60">3 Breaches</span>
                    </div>
                    <div class="vmp-progress"><div class="vmp-progress-bar opacity-40" style="width: 15%"></div></div>
                </div>
            </div>
        </div>
    </div>

    {% else %}
    <div class="vmp-empty py-12">
        <div class="vmp-empty-title">NO ANALYTICS</div>
        <div class="vmp-empty-description">Insufficient data to generate performance report.</div>
    </div>
    {% endif %}
</div>