<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 p-4">
    {% if cases and cases|length > 0 %}
        {% for case in cases %}
        <div class="group relative flex flex-col rounded-xl border border-white/10 bg-[#0A0A0A]/60 hover:border-emerald-500/30 transition-all duration-300 overflow-hidden cursor-pointer"
             onclick="window.location='/cases/{{ case.id }}'">
            
            <div class="p-4 border-b border-white/5 flex justify-between items-center bg-white/[0.02]">
                <div class="flex items-center gap-2">
                    <span class="font-mono text-[10px] text-[#60ffc6]">#{{ case.id|string|truncate(8, True, '') }}</span>
                </div>
                <span class="font-mono text-[9px] text-white/30 opacity-40">{{ case.updated_at | date('%H:%M') if case.updated_at else 'â€”' }}</span>
            </div>

            <div class="p-5 flex-1">
                <h4 class="font-serif text-lg text-white group-hover:text-[#60ffc6] transition-colors leading-tight mb-4">
                    {{ case.subject or 'Action Required' }}
                </h4>
                
                <div class="flex items-center justify-between mt-auto">
                    {% if case.status == 'open' %}
                        {% set status_pill = 'vmp-pill-pending' %}
                    {% elif case.status == 'waiting_supplier' %}
                        {% set status_pill = 'vmp-pill-disputed' %}
                    {% elif case.status == 'resolved' %}
                        {% set status_pill = 'vmp-pill-paid' %}
                    {% elif case.status == 'blocked' %}
                        {% set status_pill = 'vmp-pill-disputed' %}
                    {% else %}
                        {% set status_pill = 'vmp-pill-pending' %}
                    {% endif %}
                    <span class="vmp-pill {{ status_pill }}" role="status" aria-label="Case status: {{ (case.status or 'OPEN') | upper | replace('_', ' ') }}">
                        {{ (case.status or 'OPEN') | upper | replace('_', ' ') }}
                    </span>

                    <div class="flex items-center gap-2 opacity-40 font-mono text-[10px]">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"></path>
                        </svg>
                        {{ case.evidence_count|default(0) }}
                    </div>
                </div>
            </div>

            <div class="absolute inset-x-0 bottom-0 h-1 bg-[#60ffc6] transform translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
        </div>
        {% endfor %}
    {% else %}
        <div class="col-span-full py-20 text-center border border-dashed border-white/10 rounded-xl">
            <div class="font-serif text-2xl text-white/20 mb-2">No active signals found</div>
            <div class="font-mono text-xs text-white/30 uppercase tracking-widest">Uplink Silent</div>
        </div>
    {% endif %}
</div>
